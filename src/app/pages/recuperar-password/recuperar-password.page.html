<ion-header class="ion-no-border">
  <ion-toolbar color="duoc-blue">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/login" color="duoc-yellow"></ion-back-button>
    </ion-buttons>
    <ion-title color="duoc-yellow">Recuperar Contraseña</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="recuperar-container">
    <!-- Logo y título -->
    <div class="logo-container">
      <img src="assets/imgs/logo-duoc.png" alt="DuocUC Logo" class="logo">
      <h2>¿Olvidaste tu contraseña?</h2>
      <p>Ingresa tu correo institucional para recuperarla</p>
    </div>

    <!-- Formulario -->
    <form [formGroup]="recuperarForm" (ngSubmit)="onSubmit()" class="recuperar-form">
      <ion-item class="custom-input">
        <ion-label position="floating">Correo electrónico</ion-label>
        <ion-input 
          type="email" 
          formControlName="email"
          placeholder="usuario@duocuc.cl">
        </ion-input>
        <ion-note slot="helper">Debe ser un correo @duocuc.cl</ion-note>
        <ion-note slot="error" *ngIf="recuperarForm.get('email')?.touched && recuperarForm.get('email')?.errors?.['required']">
          El correo es requerido
        </ion-note>
        <ion-note slot="error" *ngIf="recuperarForm.get('email')?.touched && recuperarForm.get('email')?.errors?.['email']">
          Ingrese un correo válido
        </ion-note>
        <ion-note slot="error" *ngIf="recuperarForm.get('email')?.touched && recuperarForm.get('email')?.errors?.['duocEmail']">
          Debe usar un correo @duocuc.cl
        </ion-note>
      </ion-item>

      <ion-button 
        expand="block" 
        color="duoc-blue" 
        type="submit"
        [disabled]="!recuperarForm.valid || isLoading"
        class="recuperar-button">
        <ion-spinner name="crescent" *ngIf="isLoading"></ion-spinner>
        <span *ngIf="!isLoading">Enviar instrucciones</span>
      </ion-button>

      <div class="additional-links">
        <ion-button 
          fill="clear" 
          color="duoc-blue" 
          routerLink="/login"
          class="login-link">
          Volver al inicio de sesión
        </ion-button>
      </div>
    </form>
  </div>
</ion-content>